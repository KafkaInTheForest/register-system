### 实现思路

大致思路如下：

- 参考redux官方文档，使用相应的模板创建项目文件夹
- 参考browser-router-demo，首先创建pages文件夹，里面包括了所有的页面：App、Main、Detail、Login、About，在项目根页面创建route.js，并把这些页面挂载到路由上去
- 完成主页表格数据的数据结构设计，并设计好组件的层次结构
- 根据antd库的使用示例及api，依次完成各个页面的样式设计，添加页面之间的跳转逻辑
- 使用redux库，将主页的表单数据保存到到store里面，并在有需要的地方使用useSeletor使用
- 为各个部分添加事件，完成相关方法的编写
- 完成后端的代码编写后，使用axios发送网络请求，与后端对接

在完成过程中，有很多细节需要着重提一下，主要有以下的部分

#### 页面结构

这个项目的页面结构如下

```
-Login 登录界面
-App 主页面
 -Main 人员管理页面
 -Detail 查看详情页面
 -About 关于页面
```

网页的Header和侧边栏Slider是主页面所共用的，所以在App中实现，Main，Detail，About页面均作为组件在App页面中调用。

此外，人员管理页面的表格的操作栏也是用组件实现的，在component文件夹中。

#### 页面具体实现

- 登录页面
  - 登录页面只有一个简单的输入窗口，直接使用了antd的框架
- 主页面
  - 主页面中只有头部的Header和左侧的Slider，实现的功能只有退出登录和简单的路由切换
- 人员管理界面
  - 表格上方有3个按钮和一个输入框，直接使用antd的组件即可
  - 人员管理界面的主题是中间的Table，需要定义一个columns作为每行的数据类型
- 查看详情页面
  - 该页面包含用户的详细信息
  - 在左上方使用了面包屑组件，可以点击人员管理跳转回人员管理界面
  - 页面偏右部分是信息的简单罗列

#### 数据处理方式

这个项目中我的数据主要采用了redux框架，其中存储的数据只有人员管理界面的表格信息即userdata。在userdataSlicer中，我为userdata设定了5个action，分别是additem添加条目,delitem删除条目,edititem编辑条目，inititem初始化条目以及clearitem清空条目。在人员管理页面、查看详情页面以及Operation组件里均使用了userdata的数据

一下是所有页面的数据处理情况

- 登录界面
  - 登录时会将输入框里的账号和密码通过通过axios的post请求发给服务端，服务端会验证账号密码的正确性。如果验证失败，则弹出一个错误的Model消息框；如果验证成功，则弹出一个成功的Model消息框，并切换到主页面
  - 调用登录的接口时，会受到来自服务端的验证token以及用户的昵称和头像信息。需要将其保存到本地cookie中
- 主界面
  - 头部header里面的用户名和头像是从本地的cookie里面拿到的
  - 在退出登录时，需要调用退出登录的接口，让服务端清除
- 人员管理页面
  - 需要一个变量save_data来保存页面初次渲染时的表单数据，方便点击重置按钮时reset
  - 调用store里面保存的表格数据赋值给data，页面刚加载时为空
  - 点击了添加用户按钮时，需要发送post请求更改服务端的数据，并调用usedispatch调用设定的action:additem
  - 点击搜索之后，会根据搜索框的内容去匹配，按照用户姓名、专业、年级、性别的顺序搜索，并将符合的结果渲染到界面上
- 查看详情界面
  - 从人员管理界面跳转到查看详情界面时，会将该用户的id作为参数传入，在详情页面首先会用useselector去拿store里面的数据，然后将其去寻找id和传入的id相同的条目，并将其中的信息渲染到页面上去
  - 每次找到对应的条目之后需要将其保存到localstorage中（key为item）。相应的，在组件外需要初始化：首先判断localstorage中是否存在key为item的值，如果存在则直接将其作为要渲染的数据；如果不存在则使用store中的数据（这一举措是为了解决刷新页面后store中数据丢失的问题

### 问题记录

- 切换路由时，页面会出现明显的刷新
  - 原因：起初我每个页面都是独立的，每次进入不同的页面都需要重新渲染
  - 解决办法：我把每个页面的相同部分挂载到了根路由上，这样就没有之前的刷新问题了

- 在进入首页后，点击返回键重新进入登录界面，重新登录后主页出现重复数据
  - 原因：之前每次初始化时，是调用reducer中的additem这个action，每次重新登录只是切换了路由，而store中的数据没有刷新，所以请求到的数据会添加到之前的列表之后
  - 解决方法：设置一个新的action:inititem，初始化时直接用该action初始化，而不是一个个去additem
- 在查看详情页面中，刷新页面会导致信息丢失
  - 原因：刷新页面后store中数据丢失
  - 解决办法：将信息保存到localstorage中，在组件外需要初始化时，首先判断localstorage中是否存在key为item的值，如果存在则直接将其作为要渲染的数据；如果不存在则使用store中的数据

